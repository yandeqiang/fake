{"version":3,"sources":["webpack://FakeVue/webpack/universalModuleDefinition","webpack://FakeVue/webpack/bootstrap","webpack://FakeVue/./src/index.ts","webpack://FakeVue/./src/observer/dep.ts","webpack://FakeVue/./src/observer/index.ts","webpack://FakeVue/./src/observer/scheduler.ts","webpack://FakeVue/./src/observer/store.ts","webpack://FakeVue/./src/observer/watcher.ts","webpack://FakeVue/./src/util/predict.ts","webpack://FakeVue/./src/vdom/create-element.ts","webpack://FakeVue/./src/vdom/htmldomapi.ts","webpack://FakeVue/./src/vdom/patch.ts","webpack://FakeVue/./src/vdom/vnode.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"FakeVue\"] = factory();\n\telse\n\t\troot[\"FakeVue\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import { observe } from './observer/index'\nimport { Watcher } from './observer/watcher'\nimport { createElement } from 'src/vdom/create-element'\nimport patch from 'src/vdom/patch'\nimport {VNode} from 'src/vdom/vnode'\nimport {autobind} from 'src/decorator/index'\n\ninterface Options {\n  el: string\n  data: object\n  computed: object\n  watch: object\n  render: Function\n}\n\nfunction proxy(target: object, sourceKey: string) {\n  return\n}\n\nclass FakeVue {\n  $options: Options\n  _data: object\n  _computed: object\n  _vm: FakeVue // proxy 监听 this 的返回值\n  _vnode: VNode|null\n  vNode: object\n  constructor(options) {\n    this.$options = options\n    this.initVm()\n    this.initData()\n    this.initComputed()\n    this.initWatch()\n    this.initRender()\n    return this._vm\n  }\n\n  initVm() {\n    this._vm = new Proxy(this, {\n      get(target, key, receiver) {\n        return (\n          target._data[key] || (target._computed[key] && target._computed[key]()) || target[key]\n        )\n      },\n      set(target, key, value) {\n        if (target._data[key]) {\n          return Reflect.set(target._data, key, value)\n        } else {\n          return Reflect.set(target, key, value)\n        }\n      }\n    })\n  }\n\n  initData() {\n    this._data = observe(this.$options.data)\n  }\n\n  initComputed() {\n    this._computed = Object.create(null)\n    const computed = this.$options.computed\n    if (!computed) return\n    Object.keys(computed).forEach(item => {\n      this._computed[item] = computed[item].bind(this._vm)\n    })\n  }\n\n  initWatch() {\n    const watch = this.$options.watch\n    if (!watch) return\n    Object.keys(watch).forEach(item => {\n      new Watcher(this._vm, item, watch[item])\n    })\n  }\n\n  initRender() {\n    this._update()\n    new Watcher(this._vm, 'e', this._update.bind(this))\n  }\n\n  _update() {\n    const {el, render} = this.$options\n    const oldVnode = this._vnode || document.querySelector(el)\n    const vnode = render.call(this, createElement)\n    this._vnode = vnode\n    patch(oldVnode, vnode)\n  }\n}\n\nexport default FakeVue\n","import {Watcher} from './watcher'\n\nexport class Dep {\n  static target: Watcher|null\n  subs: Map<any, any>\n  constructor () {\n    this.subs = new Map()\n  }\n\n  // 收集依赖\n  depend (key: string|symbol, watcher: Watcher) {\n    // console.log('depend')\n    this.subs.set(key, watcher)\n  }\n\n  // 触发依赖\n  notify (key: string|symbol, val: any) {\n    // console.log('notify')\n    this.subs.get(key) && this.subs.get(key).update();\n  }\n}\n\nexport function pushTarget (watcher: Watcher) {\n  Dep.target = watcher\n}\n\nexport function popTarget () {\n  Dep.target = null\n}\n","import {isObject, isArray, isPlainObject} from 'src/util/predict'\nimport {proxyToRaw} from './store'\nimport {Dep} from './dep'\n\ninterface defineObject {\n  __dep__: Dep\n}\n\nconst IS_ARRAY = Symbol('is array')\n\nexport function observe (data: any): object {\n  if(!isObject(data)) return data; // return when data is non-object\n\n  // array & object\n  Object.keys(data).forEach(item => {\n    data[item] = observe(data[item])\n  })\n\n  return defineReactive(data)\n}\n\nfunction defineReactive (target: defineObject) {\n\n  const dep = target.__dep__ ? target.__dep__ : new Dep() // 将 dep 封在这个 object 上\n  const proxy = new Proxy(target, {\n    get (target: object, key: string|symbol) {\n      if(key === '__dep__') return dep\n\n      const result = Reflect.get(target, key)\n      if(Dep.target && key !== '__dep__') {\n        key = isArray(target) ? IS_ARRAY: key\n\n        // target.key hasChanged\n        dep.depend(key, Dep.target)\n        const child = target[key]\n        // target.key's children hasChanged\n        if(isObject(child)) {\n          for(const i in child) {\n            child[i].__dep__ && child[i].__dep__.depend(key, Dep.target)\n          }\n        }\n        \n      }\n      // 收集依赖\n      return result\n    },\n    set (target: object, key: string|symbol, value: any) {\n      Reflect.set(target, key, observe(value))      \n      // 触发依赖\n      key = isArray(target) ? IS_ARRAY: key\n      dep.notify(key, value)\n      // 再次收集依赖\n      return true\n    }\n  })\n  proxyToRaw.set(proxy, target)\n  return proxy\n}\n","import { Watcher } from \"./watcher\"\n\n/**\n * scheduler.ts\n * The purpose is to run watcher queue in a fixed time.\n */\n\nlet hasQueue = new Set()\nlet queue = []\nlet index = 0\nlet flushing = false\nlet waiting = true\n\nfunction resetQueue () {\n  hasQueue = new Set()\n  queue = []\n  index = 0\n  flushing = false\n  waiting = true\n}\n\nfunction runQueue () {\n  flushing = true\n  waiting = false\n\n  queue.sort((a, b) => a.id - b.id)\n\n  queue.forEach((watcher, i) => {\n    index = i\n    watcher.run()\n  })\n\n  resetQueue()\n}\n\nexport function queueWatcher(watcher: Watcher) {\n  if (hasQueue.has(watcher)) return\n  hasQueue.add(watcher)\n\n  if (!flushing) {\n    queue.push(watcher)\n  } else {\n    let i = queue.length - 1\n    while(i > index && queue[i].id > watcher.id) i--\n    queue.splice(i, 0, watcher)\n  }\n\n  if(waiting) {\n    // use mircotask\n    Promise.resolve().then(runQueue)\n  }\n}\n","export const proxyToRaw = new WeakMap()\n","import {isObject, isArray, isPlainObject} from 'src/util/predict'\nimport {Dep, pushTarget, popTarget} from './dep'\nimport {queueWatcher} from './scheduler'\nimport {proxyToRaw} from './store'\n\nlet id = 0\n\nexport class Watcher {\n  id: number\n  target: object\n  exp: string\n  fn: Function\n  value: any\n  constructor (target, exp, fn) {\n    this.id = id++\n    this.exp = exp\n    this.fn = fn\n    this.target = target\n    this.value = this.get()\n  }\n\n  get () {\n    const {target, exp} = this\n    pushTarget(this)\n    let value = Reflect.get(target, exp)\n    // value = transfer(value)\n    isArray(value) && value.length\n    popTarget()\n    return value\n  }\n\n  update (target) {\n    queueWatcher(this)\n  }\n\n  run () {\n    const oldValue = this.value\n    const value = this.value = this.get()\n    this.fn(oldValue, value)\n  }\n}\n\n// function transfer (value) {\n//   const target = proxyToRaw.has(value) ? proxyToRaw.get(value) : value\n//   for(let i in target) {\n//     target[i] = transfer(target[i])\n//   }\n//   return target\n// }\n","export function isUndef (s:any): boolean {return s === undefined}\nexport function isDef (s:any): boolean {return s !== undefined}\nexport function _toString () {\n  return Object.prototype.toString()\n}\n\nexport function isObject(obj: any):boolean {\n  return obj !== null && typeof obj === 'object'\n}\n\nexport function isPlainObject(obj: any):boolean {\n  return _toString.call(obj) === '[object Object]'\n}\n\nexport function isRegexp(reg: any):boolean {\n  return _toString.call(reg) === '[object RegExp]'\n}\n\nexport function isArray(arr: any):boolean {\n  return Array.isArray(arr)\n}\n\nexport function isPrimitive (value: any): boolean {\n  return (\n    typeof value === 'string' ||\n    typeof value === 'number' ||\n    // $flow-disable-line\n    typeof value === 'symbol' ||\n    typeof value === 'boolean'\n  )\n}\n","import toVnode, {VNode} from './vnode'\n/**\n * \n * @param sel \n * @param data \n * @param children \n * @return VNode\n */\nexport function createElement (sel: any, data?: any, children?: any): VNode {\n  children.forEach((item, i) => {\n    if(typeof item === 'string' || typeof item === 'number') {\n      children[i] = toVnode(undefined, undefined, undefined, item, null)\n    }\n  });\n  return toVnode(sel, data, children, undefined, null)\n}","export interface DOMAPI {\n  createElement: (tagName: any) => HTMLElement;\n  createElementNS: (namespaceURI: string, qualifiedName: string) => Element;\n  createTextNode: (text: string) => Text;\n  createComment: (text: string) => Comment;\n  insertBefore: (parentNode: Node, newNode: Node, referenceNode: Node | null) => void;\n  removeChild: (node: Node, child: Node) => void;\n  appendChild: (node: Node, child: Node) => void;\n  parentNode: (node: Node) => Node;\n  nextSibling: (node: Node) => Node;\n  tagName: (elm: Element) => string;\n  setTextContent: (node: Node, text: string | null) => void;\n  getTextContent: (node: Node) => string | null;\n  isElement: (node: Node) => node is Element;\n  isText: (node: Node) => node is Text;\n  isComment: (node: Node) => node is Comment;\n}\n\nfunction createElement(tagName: any): HTMLElement {\n  return document.createElement(tagName);\n}\n\nfunction createElementNS(namespaceURI: string, qualifiedName: string): Element {\n  return document.createElementNS(namespaceURI, qualifiedName);\n}\n\nfunction createTextNode(text: string): Text {\n  return document.createTextNode(text);\n}\n\nfunction createComment(text: string): Comment {\n  return document.createComment(text);\n}\n\nfunction insertBefore(parentNode: Node, newNode: Node, referenceNode: Node | null): void {\n  parentNode.insertBefore(newNode, referenceNode);\n}\n\nfunction removeChild(node: Node, child: Node): void {\n  node.removeChild(child);\n}\n\nfunction appendChild(node: Node, child: Node): void {\n  node.appendChild(child);\n}\n\nfunction parentNode(node: Node): Node | null {\n  return node.parentNode;\n}\n\nfunction nextSibling(node: Node): Node | null {\n  return node.nextSibling;\n}\n\nfunction tagName(elm: Element): string {\n  return elm.tagName;\n}\n\nfunction setTextContent(node: Node, text: string | null): void {\n  node.textContent = text;\n}\n\nfunction getTextContent(node: Node): string | null {\n  return node.textContent;\n}\n\nfunction isElement(node: Node): node is Element {\n  return node.nodeType === 1;\n}\n\nfunction isText(node: Node): node is Text {\n  return node.nodeType === 3;\n}\n\nfunction isComment(node: Node): node is Comment {\n  return node.nodeType === 8;\n}\n\nexport const htmlDomApi = {\n  createElement,\n  createElementNS,\n  createTextNode,\n  createComment,\n  insertBefore,\n  removeChild,\n  appendChild,\n  parentNode,\n  nextSibling,\n  tagName,\n  setTextContent,\n  getTextContent,\n  isElement,\n  isText,\n  isComment,\n} as DOMAPI;\n\nexport default htmlDomApi;","import { isDef, isUndef } from \"src/util/predict\"\nimport toVnode, { VNode } from \"./vnode\"\nimport api from \"./htmldomapi\"\n\nfunction sameVnode(vnode: any, oldVnode: VNode) {\n  return vnode.sel === oldVnode.sel && vnode.key === oldVnode.key\n}\n\nfunction createKeyToOldIdx (children: Array<VNode>, start, end) {\n  children = children.slice(start, end)\n  const map = new Map()\n  children.forEach(item => {\n    map[item.key] = item\n  })\n  return map\n}\n\nfunction emptyNodeAt(elm: any) {\n  const id = elm.id ? \"#\" + elm.id : \"\"\n  const className = elm.className ? \".\" + elm.className.split(\" \").join(\".\") : \"\"\n  const sel = elm.tagName.toLowerCase() + id + className\n  return toVnode('', {}, [], undefined, elm)\n}\n\nfunction isVnode(vnode: any) {\n  return vnode && isDef(vnode.sel)\n}\n\nfunction removeVnodes (parentElm: Node, children: Array<VNode>) {\n  children.forEach(item => {\n    api.appendChild(parentElm, item.elm)\n  })\n}\n\nfunction addVnodes (parentElm: Node, children: Array<VNode>) {\n  children.forEach(item => {\n    api.removeChild(parentElm, item.elm)\n  })\n}\n\nfunction createElm (vnode: VNode) {\n  let data = vnode.data;\n  let children = vnode.children;\n  let sel = vnode.sel;\n  // element 元素\n  if (sel !== undefined) {\n    // Parse selector\n    let hashIdx = sel.indexOf('#');\n    let dotIdx = sel.indexOf('.', hashIdx);\n    let hash = hashIdx > 0 ? hashIdx : sel.length;\n    let dot = dotIdx > 0 ? dotIdx : sel.length;\n    let tag = hashIdx !== -1 || dotIdx !== -1 ? sel.slice(0, Math.min(hash, dot)) : sel;\n    // 创建一个 element 节点 并且赋予它 id class 属性\n    let elm = vnode.elm = api.createElement(tag);\n    if (hash < dot) {\n      elm.id = sel.slice(hash + 1, dot);\n    }\n    if (dotIdx > 0) {\n      elm.className = sel.slice(dot + 1).replace(/\\./g, ' ');\n    }\n    if (Array.isArray(children)) {\n      for (let i = 0; i < children.length; ++i) {\n        let ch = children[i];\n        if (ch != null) {\n          api.appendChild(elm, createElm(ch));\n        }\n      }\n    }else if (typeof vnode.text === 'string') {\n      api.appendChild(elm, api.createTextNode(vnode.text));\n    }\n  } else { // 文本节点\n    vnode.elm = api.createTextNode(vnode.text);\n  }\n  return vnode.elm;\n}\n\nfunction updateChildren (parentElm: Node, oldCh: Array<VNode>, newCh: Array<VNode>) {\n  let oldStartIdx = 0, newStartIdx = 0;\n  let oldEndIdx = oldCh.length - 1;\n  let oldStartVnode = oldCh[0];\n  let oldEndVnode = oldCh[oldEndIdx];\n  let newEndIdx = newCh.length - 1;\n  let newStartVnode = newCh[0];\n  let newEndVnode = newCh[newEndIdx];\n  let oldKeyToIdx: any;\n  let idxInOld: number;\n  let elmToMove: VNode;\n  let before: any;\n\n  while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n    if (oldStartVnode == null) {\n      oldStartVnode = oldCh[++oldStartIdx]; // Vnode might have been moved left\n    } else if (oldEndVnode == null) {\n      oldEndVnode = oldCh[--oldEndIdx];\n    } else if (newStartVnode == null) {\n      newStartVnode = newCh[++newStartIdx];\n    } else if (newEndVnode == null) {\n      newEndVnode = newCh[--newEndIdx];\n    } else if (sameVnode(oldStartVnode, newStartVnode)) {\n      patchVnode(oldStartVnode, newStartVnode);\n      oldStartVnode = oldCh[++oldStartIdx];\n      newStartVnode = newCh[++newStartIdx];\n    } else if (sameVnode(oldEndVnode, newEndVnode)) {\n      patchVnode(oldEndVnode, newEndVnode);\n      oldEndVnode = oldCh[--oldEndIdx];\n      newEndVnode = newCh[--newEndIdx];\n    } else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right\n      patchVnode(oldStartVnode, newEndVnode);\n      api.insertBefore(parentElm, oldStartVnode.elm as Node, api.nextSibling(oldEndVnode.elm as Node));\n      oldStartVnode = oldCh[++oldStartIdx];\n      newEndVnode = newCh[--newEndIdx];\n    } else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left\n      patchVnode(oldEndVnode, newStartVnode);\n      api.insertBefore(parentElm, oldEndVnode.elm as Node, oldStartVnode.elm as Node);\n      oldEndVnode = oldCh[--oldEndIdx];\n      newStartVnode = newCh[++newStartIdx];\n    } else {\n      if (oldKeyToIdx === undefined) {\n        oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n      }\n      idxInOld = oldKeyToIdx[newStartVnode.key as string];\n      if (isUndef(idxInOld)) { // New elment\n        api.insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm as Node);\n        newStartVnode = newCh[++newStartIdx];\n      } else {\n        elmToMove = oldCh[idxInOld];\n        if (elmToMove.sel !== newStartVnode.sel) {\n          api.insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm as Node);\n        } else {\n          patchVnode(elmToMove, newStartVnode);\n          oldCh[idxInOld] = undefined as any;\n          api.insertBefore(parentElm, (elmToMove.elm as Node), oldStartVnode.elm as Node);\n        }\n        newStartVnode = newCh[++newStartIdx];\n      }\n    }\n  }\n}\n\nfunction patchVnode(vnode: VNode, oldVnode: VNode) {\n  const elm = vnode.elm = (oldVnode.elm as Node)\n\n  const oldCh = oldVnode.children\n  const ch = vnode.children\n\n  if (vnode === oldVnode) return\n\n  // vnode is textNode\n  if (isDef(vnode.text)) {\n    api.setTextContent(elm, vnode.text)\n  } else {\n    if(isDef(oldCh) && isDef(ch)) {\n      updateChildren(elm, oldCh, ch)\n    }else if(isDef(oldCh)) {\n      removeVnodes(elm, oldCh)\n    }else if(isDef(ch)) {\n      addVnodes(elm, ch)\n    }else if(isDef(oldVnode.text)){\n      api.setTextContent(elm, '')\n    }\n  }\n}\n\nexport default function patch(oldVnode: any, vnode: VNode) {\n  if (!isVnode(oldVnode)) {\n    oldVnode = emptyNodeAt(oldVnode)\n  }\n\n  if (sameVnode(oldVnode, vnode)) {\n    patchVnode(oldVnode, vnode)\n  } else {\n    const parentElm = api.parentNode(oldVnode.elm)\n    createElm(vnode)\n    api.insertBefore(parentElm, vnode.elm, api.nextSibling(oldVnode.elm))\n    api.removeChild((parentElm as Node), oldVnode.elm)\n  }\n}\n","export interface VNode {\n  sel: string\n  data: object\n  children: Array<VNode>\n  text: any\n  elm: Node|null\n  key: string | number\n}\n\nexport interface vNodeData {\n  key?: string|number\n}\n\nexport default function toVnode (\n  sel: string|undefined,\n  data: vNodeData|undefined,\n  children: Array<VNode>|undefined,\n  text: string|number|undefined,\n  elm: Node|null\n):VNode {\n  const key = data && data.key\n  return {\n    sel,\n    data,\n    children,\n    text,\n    elm,\n    key\n  }\n}"],"sourceRoot":""}